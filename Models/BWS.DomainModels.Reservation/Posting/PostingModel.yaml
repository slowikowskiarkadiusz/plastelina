channels:
  sbq-inbound-posting:
    description: The queue by which postings are delivered to DIP
    publish:
      summary: Receive a posting from the outside
      message:
        $ref: "#/components/messages/PostingMessage"

  sbt-outbound-posting:
    description: The topic by which postings are sent out from DIP
    subscribe:
      summary: Send a posting from the domain layer to a subscribing service
      message:
        $ref: "#/components/messages/PostingMessage"

components:
  messages:
    PostingMessage:
      name: Posting
      title: Posting
      summary: Posting description
      contentType: application/json
      payload:
        $ref: "#/components/schemas/BWS.DomainModels.Reservation.Posting/PostingModel"

  schemas:
    BWS.DomainModels.Reservation.Posting:
      PostingModel:
        description: "Posting (invoice) as response to given purchase orders"
        $id: PostingModel
        confluencePageContentId: 623214593
        type: object
        references:
          - BWS.DomainModels.Common
        usings:
          - BWS.DomainModels.Common
        properties:
          CodingLines:
            type: array
            items:
              $ref: "#/components/schemas/BWS.DomainModels.Reservation.Posting/CodingLine"
          VatLines:
            type: array
            items:
              $ref: "#/components/schemas/BWS.DomainModels.Reservation.Posting/VatLine"
          PoConnectionLines:
            type: array
            items:
              $ref: "#/components/schemas/BWS.DomainModels.Reservation.Posting/PoConnectionLine"
          PoLines:
            type: array
            items:
              $ref: "#/components/schemas/BWS.DomainModels.Reservation.Posting/PoLine"
          CreatedTimestamp:
            type: string
            format: date-time
          TMSCompanyId:
            type: string
          CurrencyCode:
            $ref: "#/components/schemas/BWS.DomainModels.Common/Currency"
          DueDate:
            type: string
            format: date-time
          InvoiceDate:
            type: string
            format: date-time
          InvoiceNumber:
            type: string
          NetAmount:
            type: number
          PaymentTerm:
            type: string
          PaymentDate:
            type: string
            format: date-time
          SupplierId:
            type: string
          SupplierName:
            type: string
          TaxAmount:
            type: number
          TotalAmount:
            type: number
          VoucherNumber:
            type: integer
          DocumentId:
            type: string
        required:
          - CodingLines
          - VatLines
          - PoConnectionLines
          - PoLines
          - CreatedTimestamp
          - TMSCompanyId
          - CurrencyCode
          - InvoiceDate
          - InvoiceNumber
          - PaymentTerm
          - SupplierId
          - SupplierName
          - TotalAmount
          - VoucherNumber
          - DocumentId